<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]

        // splice(arr,2,3,10,20,30,40,50,60,70)
        splice(arr, 0)
        console.log(arr);


        function splice(arr, del, delNum) {
            // 如果只有一个参数，就是删除到数组的结尾，删除的个数就是长度减去起始
            if (delNum === undefined) delNum = arr.length - del;
            // 如果输入的起始位是负数，就先转化为正数
            if (del < 0) del = arr.length + del

            // 先完成删除的部分
            var arr_new = [];//定义一个空数组，用于存储将要返回的被删除的元素
            // 对需要删除的元素进行存储并设置为空
            for (let i = del; i < delNum + del; i++) {
                arr_new.push(arr[i]);
                arr[i] = null;
            }
            // 如果需要插入元素
            if (arguments.length - 3 > 0) {
                // 为了避免对数组的元素进行太多的移动，消耗内存，先判断删除的元素的数量是不是大于插入的数量，如果大于的话，就先插入再删除多余的null
                if (delNum > arguments.length - 3) {
                    // 将需要插入的元素放进去
                    for (let i = 0; i < arguments.length - 3; i++) {
                        arr[del + i] = arguments[i + 3];
                    }
                    // 将多余的null删掉
                    for (let i = 0; i < arr.length - del - delNum; i++) arr[del + arguments.length - 3 + i] = arr[del + delNum + i]
                    // 考虑到数组本身元素可能是各种类型，清除的时候要设为null之后在清除
                    for (let i = 0; i < arguments.length - 3; i++) arr[arr.length - arguments.length + 3 + i] = null;
                    arr.length -= arguments.length - 3
                } else {
                    // 如果插入的元素的数量大于删除的元素的数量，就先整体将null后面的元素向后移动一定的差值，然后再进行插入
                    var N = arr.length
                    console.log(N);
                    for (let j = 1; j <= N - del - delNum; j++) arr[N - j + (arguments.length - 3 - delNum)] = arr[N - j];
                    // 将需要插入的元素放进去
                    for (let i = 0; i < arguments.length - 3; i++) arr[del + i] = arguments[i + 3];
                }
            } else {
                arr.length -= delNum;
            }

            console.log(arr_new);
            return arr_new;
        }

    </script>
</body>

</html>